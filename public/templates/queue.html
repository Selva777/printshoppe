<!DOCTYPE html>
<html>
  <head>
    <title>{{title}}</title>
    {{> headIncludes}}
  </head>
<body>
    <div class="container">
    <h1>Print Shoppe Queue</h1>
    
      <p>Ordered by ascending time ordered (newest jobs at bottom).</p>
    
      <div>
        <a href="#" data-bind="click: hide('cancelled')">Toggle cancelled</a> | 
        <a href="#" data-bind="click: hide('done')">Toggle done</a>
        <table class="table table-hover table-condensed">
          <thead>
              <tr>
                <th><a href="#" data-bind="orderable: {collection: 'jobs', field: 'date'}">Date</a></th>
                <th><a href="#" data-bind="orderable: {collection: 'jobs', field: 'email'}">Email</a></th>
                <th>Files</th>
                <th>Notes</th>
                <th><a href="#" data-bind="orderable: {collection: 'jobs', field: 'status'}">Status<a></th>
              </tr>
              <tbody data-bind="foreach: jobs">
                <tr data-bind="attr: { 'class': status }">
                    <td><span data-bind="attr: { 'data-livestamp': humanDate }"></span></td>
                    <td data-bind="text: email"></td>
                    <td>
                      <ul data-bind="foreach: { data: files, as: 'file' }">
                        <li><a href="" data-bind="text: file[0], attr: { 'href': 'http://thingiverse.com/' + file[0] }"></a> x <span data-bind="text: file[1]"></span></li>
                      </ul>
                    </td>
                    <td data-bind="text: message"></td>
                    <td>
                      <select class="status" data-bind="value: status, attr: { 'data-key': key, 'class': status }, statusChange">
                        <option>pending</option>
                        <option>printing</option>
                        <option>done</option>
                        <option>cancelled</option>
                      </select>
                    </td>
                </tr>
            </tbody>
          </thead>

        </table>

      </div>
    </div> <!-- end container -->

    <script>var jobData = {{{data}}};</script>
    <script src="/scripts/vendor/jquery-1.11.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/vendor/knockout-3.2.0.js"></script>
    <script src="/scripts/vendor/knockout.bindings.orderable.js"></script>
    <script src="/scripts/vendor/moment.min.js"></script>
    <script src="/scripts/vendor/livestamp.min.js"></script>
    <script src="/scripts/queue.js"></script>

    {{> footerIncludes}}

  </body>
</html>